<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Max Mertens">
  <title>Song Pattern Generator</title>
</head>

<body>
  <div id="root"></div>




  <div class="container row">
    <button class='button button--secondary' id="create" onclick="cloneFrame()">Save Copy</button>
    <button class='button button--primary icon-button-padding' id="create" onclick="update()">
      <div class="icon icon--swap icon--white"></div>
      Reload
    </button>
  </div>



  <script type="module" src="./main.tsx"></script>

  
  <script>

    function colorBoxUpdate(elem) {

      const colorSelectVector = elem.value;

      const elemParent = elem.parentElement;

      const colorBox = elemParent.firstElementChild;

      colorBox.className = 'colorBox';

      if (elem.value == '0.27 0 0.45') {
        colorBox.className = 'colorBox purple-noise';
      } else if (elem.value == '0.945 0.337 0.137') {
        colorBox.className = 'colorBox orange-fuzz';
      } else if (elem.value == '0.439 0.298 0.996') {
        colorBox.className = 'colorBox reverb-blue';
      } else if (elem.value == '0.925 0.89 0.815') {
        colorBox.className = 'colorBox vanilla-phaser';
      } else if (elem.value == '0.803 0.619 0.235') {
        colorBox.className = 'colorBox gold-tuner';
      } else if (elem.value == '0 0 0') {
        colorBox.className = 'colorBox black';
      }

      update();
    }


    function update() {
      const rows = document.querySelector('#rowSlider').value;
      const cols = document.querySelector('#colSlider').value;
      const colorSelectPillar = document.querySelector('#colorPillar').value;
      const colorSelectBubble = document.querySelector('#colorBubble').value;
      const colorSelectVector = document.querySelector('#colorVector').value;

      parent.postMessage({
        pluginMessage: {
          rows,
          cols,
          colorSelectPillar,
          colorSelectBubble,
          colorSelectVector
        }
      }, '*');
    }


    function cloneFrame() {
      parent.postMessage({
        pluginMessage: {
          type: 'clone'
        }
      }, '*')
    }

  </script>

</body>

</html>